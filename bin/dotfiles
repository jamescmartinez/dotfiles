#!/usr/bin/env bash

script_dir=$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)
dotfiles_dir=$(dirname $script_dir)

cd $dotfiles_dir

for file in $(find * -type f -not -path "bin*" -not -name "README.md"); do
  printf "Symlinking .$file..."
  mkdir -p "$HOME/$(dirname ".$file")"
  ln -sF $dotfiles_dir/$file "$HOME/.$file"
  printf " done.\n"
done

# Make VS Code load settings from the Linux settings path instead of the Mac
# settings path.
ln -sF "$HOME/.config/Code/User/settings.json" "$HOME/Library/Application Support/Code/User/settings.json"